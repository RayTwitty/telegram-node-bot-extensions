# telegram-node-bot-extensions
Этот небольшой проект представляет собой расширения стандартного функционала для библиотеки [telegram-node-bot](https://github.com/Naltox/telegram-node-bot).

## Get started
Для того, чтобы начать пользоваться расширениями, необходимо проделать несколько простых действий.

> Поместить константу `Telegram` в глобальное пространство имен.
```js
global.Telegram = require('telegram-node-bot')
```
> Загрузить модуль с расширениями.
```js
const extensions = require('./extensions')
```
> И наконец, добавить расширения в область видимости библиотеки.
```js
tg.addScopeExtension(extensions.MultiFormScopeExtension)
```

## Multi Forms
Вы можете создавать сложные формы с высокой степенью вложенности. Используйте `$.runMultiForm` для запуска.
```js
let form = {

}

$.runMultiForm(form, result => {

})
```
Существует два варианта проверки введенных данных - проверка по значению из кнопок клавиатуры или с помощью функции-валидатора. Функция-валидатор имеет приоритет.
```js
keyboard: [['10', '20'], ['30', '40']],
validator: (message) => {
	return Number.isInteger(parseInt(message.text))
}
```
Для того, чтобы вывести сообщение о некорректности введенных данных, можно воспользоваться полем `error`.
```js
title: 'Введите число',
error: 'Данные должны быть числом.'
```
Есть возможность переопределения значений, которые будут записаны в результат. Например:
```js
keyboard: [['Да', 'Нет']],
values: {'Да': true, 'Нет': false}
```
### Настройка формы
Доступна установка дополнительных параметров формы через конфиг, который передается в конструктор.
```js
const config = {
	buttons: {
		cancel: 'Отменить'
	},
	messages: {
		canceled: 'Заполнение формы отменено.'
	}
}

$.runMultiForm(form, result => {

}, config)
```
В объекте `buttons` задается использование кнопок. Можно включить кнопки отмены и возвращения к предыдущему вопросу.
```js
buttons: {
	cancel: 'Отменить',
	back: 'Назад'
}
```
Аналогичным образом, в объекте `messages` можно включить сообщения при завершении и при отмене формы.
```js
messages: {
	canceled: 'Заполнение формы отменено.',
	completed: 'Форма успешно заполнена.'
}
```
### Пример формы
